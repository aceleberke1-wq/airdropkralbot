:root {
  --bg0: #070b1f;
  --bg1: #0f1735;
  --bg2: #1a0f2e;
  --ink: #eff6ff;
  --muted: #8da1d6;
  --line: rgba(162, 186, 255, 0.22);
  --glass: rgba(13, 21, 49, 0.62);
  --accent: #3df8c2;
  --gold: #ffb85c;
  --danger: #ff5679;
  --ok: #70ffa0;
  --hud-heat: 0;
  --hud-threat: 0;
}

* {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  min-height: 100%;
}

body {
  color: var(--ink);
  font-family: "Space Grotesk", sans-serif;
  background: radial-gradient(1300px 900px at 10% -10%, #21397a 0%, transparent 70%),
    radial-gradient(1200px 700px at 100% 0%, #4a1c51 0%, transparent 72%),
    linear-gradient(150deg, var(--bg0), var(--bg1) 58%, var(--bg2));
  overflow-x: hidden;
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 2;
  opacity: 0;
  transition: opacity 0.24s ease;
  background: radial-gradient(1200px 700px at 50% 20%, rgba(124, 168, 255, 0.22), transparent 72%);
}

body.pulse-safe::before {
  opacity: 0.32;
  background: radial-gradient(1200px 700px at 50% 20%, rgba(112, 255, 160, 0.2), transparent 72%);
}

body.pulse-balanced::before {
  opacity: 0.28;
  background: radial-gradient(1200px 700px at 50% 20%, rgba(61, 248, 194, 0.19), transparent 72%);
}

body.pulse-aggressive::before {
  opacity: 0.34;
  background: radial-gradient(1200px 700px at 50% 20%, rgba(255, 86, 121, 0.22), transparent 70%);
}

body.pulse-reveal::before {
  opacity: 0.36;
  background: radial-gradient(1200px 700px at 50% 20%, rgba(255, 184, 92, 0.22), transparent 70%);
}

body.pulse-info::before {
  opacity: 0.26;
}

body[data-scene-mood="idle"] .shell {
  filter: saturate(0.96);
}

body[data-scene-mood="safe"] .shell {
  filter: saturate(1.04) contrast(1.01);
}

body[data-scene-mood="balanced"] .shell {
  filter: saturate(1.08) contrast(1.02);
}

body[data-scene-mood="aggressive"] .shell {
  filter: saturate(1.14) contrast(1.05);
}

body[data-scene-mood="critical"] .shell {
  filter: saturate(1.18) contrast(1.08);
}

body.quality-low #bg3d {
  opacity: 0.48;
}

body.quality-low .noise,
body.quality-low .scanlines {
  opacity: 0.06;
}

body.quality-high #bg3d {
  opacity: 0.82;
}

body.scene-lite #bg3d {
  opacity: 0.56;
  filter: saturate(0.8) contrast(0.95);
}

body.scene-cinematic #bg3d {
  opacity: 0.9;
  filter: saturate(1.15) contrast(1.05);
}

body.scene-minimal #bg3d {
  opacity: 0.42;
  filter: saturate(0.65) contrast(0.88);
}

body.scene-minimal .scanlines,
body.scene-minimal .noise {
  opacity: 0.04;
}

body.reduced-motion *,
body.reduced-motion *::before,
body.reduced-motion *::after {
  animation: none !important;
  transition: none !important;
}

body.large-type {
  font-size: 17px;
}

body.large-type .micro,
body.large-type .muted,
body.large-type .cmd {
  font-size: 13px;
}

body.hud-compact .telemetryDeck,
body.hud-compact .director,
body.hud-compact .contract,
body.hud-compact .panel {
  padding: 10px;
}

body.hud-compact .micro {
  font-size: 11px;
}

body.hud-compact .directorGrid,
body.hud-compact .contractGrid,
body.hud-compact .telemetryGrid {
  gap: 8px;
}

body.hud-extended .telemetryDeck,
body.hud-extended .director,
body.hud-extended .contract {
  padding: 16px;
}

body.hud-extended .directorGrid,
body.hud-extended .contractGrid,
body.hud-extended .telemetryGrid {
  gap: 12px;
}

body.hud-extended .value {
  letter-spacing: 0.01em;
}

#bg3d {
  position: fixed;
  inset: 0;
  z-index: 0;
  opacity: 0.72;
}

.noise,
.scanlines {
  position: fixed;
  inset: 0;
  pointer-events: none;
}

.noise {
  z-index: 1;
  background-image: radial-gradient(rgba(255, 255, 255, 0.045) 1px, transparent 1px);
  background-size: 3px 3px;
  mix-blend-mode: screen;
}

.scanlines {
  z-index: 2;
  opacity: 0.15;
  background: repeating-linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.12) 0,
    rgba(255, 255, 255, 0.12) 1px,
    transparent 2px,
    transparent 4px
  );
}

.shell {
  position: relative;
  z-index: 3;
  max-width: 1180px;
  margin: 0 auto;
  padding: 16px;
  display: grid;
  gap: 14px;
}

.topbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 14px;
}

.brand {
  display: grid;
  gap: 2px;
}

.kicker {
  margin: 0;
  color: var(--muted);
  font-size: 12px;
  letter-spacing: 0.2em;
  text-transform: uppercase;
}

h1,
h2,
h3,
h4 {
  margin: 0;
}

h1 {
  font-family: "Bebas Neue", sans-serif;
  font-size: clamp(34px, 8vw, 56px);
  letter-spacing: 0.05em;
  line-height: 0.9;
}

h2 {
  font-size: clamp(24px, 4vw, 36px);
}

h3 {
  font-size: clamp(16px, 2.5vw, 22px);
}

.micro {
  margin: 0;
  font-size: 12px;
  color: var(--muted);
  font-family: "IBM Plex Mono", monospace;
}

#sceneProfileLine,
#runtimeSceneLine {
  color: #8fdcff;
}

#liteSceneBadge {
  width: fit-content;
}

.headerActions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.card,
.panel {
  border: 1px solid var(--line);
  border-radius: 16px;
  background: linear-gradient(140deg, rgba(18, 32, 74, 0.78), rgba(10, 17, 38, 0.7));
  backdrop-filter: blur(10px);
  box-shadow: inset 0 0 26px rgba(120, 160, 255, 0.08), 0 14px 30px rgba(0, 0, 0, 0.28);
}

.hidden {
  display: none !important;
}

.hero {
  padding: 16px;
  display: grid;
  grid-template-columns: 1.2fr 1fr;
  gap: 14px;
}

.director {
  padding: 14px;
  display: grid;
  gap: 10px;
  border-color: rgba(112, 255, 160, 0.25);
  box-shadow: inset 0 0 26px rgba(61, 248, 194, 0.08), 0 14px 30px rgba(0, 0, 0, 0.28);
}

.directorMetaLine {
  color: #9ec5ff;
  border-left: 2px solid rgba(124, 168, 255, 0.35);
  padding-left: 8px;
  letter-spacing: 0.01em;
}

.contract {
  padding: 14px;
  display: grid;
  gap: 10px;
  border-color: rgba(255, 184, 92, 0.25);
  box-shadow: inset 0 0 26px rgba(255, 184, 92, 0.08), 0 14px 30px rgba(0, 0, 0, 0.28);
}

.telemetryDeck {
  padding: 14px;
  display: grid;
  gap: 10px;
  border-color: rgba(124, 168, 255, 0.3);
  box-shadow: inset 0 0 30px rgba(76, 198, 255, 0.08), 0 12px 24px rgba(0, 0, 0, 0.25);
}

body.pulse-safe .telemetryDeck,
body.pulse-balanced .telemetryDeck,
body.pulse-aggressive .telemetryDeck,
body.pulse-reveal .telemetryDeck {
  transition: box-shadow 0.18s ease, border-color 0.18s ease;
}

body.pulse-safe .telemetryDeck {
  border-color: rgba(112, 255, 160, 0.38);
  box-shadow: inset 0 0 30px rgba(112, 255, 160, 0.12), 0 12px 24px rgba(0, 0, 0, 0.25);
}

body.pulse-balanced .telemetryDeck {
  border-color: rgba(61, 248, 194, 0.4);
  box-shadow: inset 0 0 30px rgba(61, 248, 194, 0.12), 0 12px 24px rgba(0, 0, 0, 0.25);
}

body.pulse-aggressive .telemetryDeck {
  border-color: rgba(255, 86, 121, 0.42);
  box-shadow: inset 0 0 30px rgba(255, 86, 121, 0.14), 0 12px 24px rgba(0, 0, 0, 0.28);
}

body.pulse-reveal .telemetryDeck {
  border-color: rgba(255, 184, 92, 0.44);
  box-shadow: inset 0 0 30px rgba(255, 184, 92, 0.14), 0 12px 24px rgba(0, 0, 0, 0.28);
}

.telemetryGrid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
}

.telemetryCanvas {
  width: 100%;
  min-height: 118px;
  height: 132px;
  border: 1px solid rgba(146, 169, 233, 0.22);
  border-radius: 12px;
  background: linear-gradient(180deg, rgba(12, 26, 58, 0.85), rgba(8, 15, 34, 0.55));
  box-shadow: inset 0 0 26px rgba(71, 208, 255, 0.08);
}

.combatStrip {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
}

.combatCell {
  border: 1px solid rgba(162, 186, 255, 0.2);
  border-radius: 12px;
  padding: 10px;
  background: rgba(7, 12, 30, 0.52);
  display: grid;
  gap: 6px;
}

.combatCell .value {
  font-size: 13px;
  font-weight: 700;
}

.combatDirectorStrip {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 10px;
}

.combatDirectorCell {
  border: 1px solid rgba(162, 186, 255, 0.22);
  border-radius: 12px;
  padding: 10px;
  background: linear-gradient(160deg, rgba(8, 15, 36, 0.86), rgba(4, 10, 26, 0.72));
  display: grid;
  gap: 6px;
  box-shadow: inset 0 0 20px rgba(98, 132, 220, 0.08);
}

.combatDirectorCell .value {
  font-size: 13px;
  font-weight: 700;
}

#roundHeatLine[data-phase="warmup"] {
  color: #9cd9ff;
}

#roundHeatLine[data-phase="engage"] {
  color: #d7f8b6;
}

#roundHeatLine[data-phase="overdrive"] {
  color: #ffe2a9;
}

#roundHeatLine[data-phase="critical"] {
  color: #ffb2c3;
}

#roundDominanceLine[data-dominance="ahead"] {
  color: #b9ffd8;
}

#roundDominanceLine[data-dominance="even"] {
  color: #dbe5ff;
}

#roundDominanceLine[data-dominance="behind"] {
  color: #ffc0cf;
}

#roundPressureLine[data-pressure="high"] {
  color: #ffb8c8;
}

#roundPressureLine[data-pressure="mid"] {
  color: #ffd9a5;
}

#roundPressureLine[data-pressure="low"] {
  color: #bde7ff;
}

#anomalyPulseLine[data-tone="stable"] {
  color: #9de4be;
}

#anomalyPulseLine[data-tone="volatile"] {
  color: #ffd08b;
}

#anomalyPulseLine[data-tone="critical"] {
  color: #ff8aa5;
}

.combatEventTicker {
  margin: 0;
  border: 1px solid rgba(162, 186, 255, 0.2);
  border-radius: 10px;
  padding: 9px 10px;
  font-size: 12px;
  font-family: "IBM Plex Mono", monospace;
  color: var(--muted);
  background: rgba(8, 15, 36, 0.78);
  transition: border-color 160ms ease, color 160ms ease, background 160ms ease, transform 160ms ease;
}

.combatEventTicker.live {
  transform: translateY(-1px);
}

.combatEventTicker[data-tone="safe"] {
  border-color: rgba(112, 255, 160, 0.45);
  color: #b6ffd0;
}

.combatEventTicker[data-tone="balanced"] {
  border-color: rgba(61, 248, 194, 0.45);
  color: #a7ffe7;
}

.combatEventTicker[data-tone="aggressive"] {
  border-color: rgba(255, 86, 121, 0.5);
  color: #ffc0cf;
}

.combatEventTicker[data-tone="reveal"] {
  border-color: rgba(255, 184, 92, 0.52);
  color: #ffe1b4;
}

.combatEventTicker[data-tone="info"],
.combatEventTicker[data-tone="idle"] {
  border-color: rgba(162, 186, 255, 0.35);
  color: #dbe5ff;
}

.fxBurstLayer {
  position: fixed;
  inset: 0;
  z-index: 11;
  pointer-events: none;
  overflow: hidden;
}

.fxBurst {
  position: absolute;
  width: 26px;
  height: 26px;
  border-radius: 999px;
  border: 2px solid rgba(166, 195, 255, 0.75);
  background: radial-gradient(circle, rgba(166, 195, 255, 0.25) 0%, rgba(7, 12, 30, 0) 72%);
  box-shadow: 0 0 26px rgba(166, 195, 255, 0.4);
}

.fxBurst.safe {
  border-color: rgba(112, 255, 160, 0.76);
  box-shadow: 0 0 24px rgba(112, 255, 160, 0.45);
}

.fxBurst.balanced {
  border-color: rgba(61, 248, 194, 0.82);
  box-shadow: 0 0 24px rgba(61, 248, 194, 0.5);
}

.fxBurst.aggressive {
  border-color: rgba(255, 86, 121, 0.84);
  box-shadow: 0 0 24px rgba(255, 86, 121, 0.5);
}

.fxBurst.reveal {
  border-color: rgba(255, 184, 92, 0.84);
  box-shadow: 0 0 24px rgba(255, 184, 92, 0.5);
}

.fxLabel {
  position: absolute;
  font-size: 11px;
  letter-spacing: 0.07em;
  font-family: "IBM Plex Mono", monospace;
  text-transform: uppercase;
  color: #d9e5ff;
  text-shadow: 0 0 8px rgba(7, 12, 30, 0.92);
}

.fxLabel.safe {
  color: #bfffd7;
}

.fxLabel.balanced {
  color: #9efee6;
}

.fxLabel.aggressive {
  color: #ffbdcd;
}

.fxLabel.reveal {
  color: #ffe3b8;
}

.combatOverlay {
  position: fixed;
  inset: 0;
  z-index: 10;
  pointer-events: none;
  overflow: hidden;
  opacity: 0;
  transition: opacity 220ms ease;
}

.combatOverlay.live {
  opacity: 1;
}

.combatOverlay::before {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at center, rgba(124, 168, 255, 0.06) 0%, rgba(7, 11, 31, 0) 72%);
}

.combatOverlay.tone-safe::before {
  background: radial-gradient(circle at center, rgba(112, 255, 160, 0.08) 0%, rgba(7, 11, 31, 0) 72%);
}

.combatOverlay.tone-balanced::before {
  background: radial-gradient(circle at center, rgba(61, 248, 194, 0.08) 0%, rgba(7, 11, 31, 0) 72%);
}

.combatOverlay.tone-aggressive::before {
  background: radial-gradient(circle at center, rgba(255, 86, 121, 0.09) 0%, rgba(7, 11, 31, 0) 74%);
}

.combatOverlay.tone-reveal::before {
  background: radial-gradient(circle at center, rgba(255, 184, 92, 0.1) 0%, rgba(7, 11, 31, 0) 74%);
}

.combatOverlayGrid {
  position: absolute;
  inset: 0;
  background-image: linear-gradient(rgba(140, 175, 255, 0.12) 1px, transparent 1px),
    linear-gradient(90deg, rgba(140, 175, 255, 0.12) 1px, transparent 1px);
  background-size: 72px 72px;
  opacity: 0.18;
  mix-blend-mode: screen;
}

.combatOverlayPulse {
  position: absolute;
  width: min(62vw, 640px);
  aspect-ratio: 1;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) scale(0.84);
  border-radius: 999px;
  border: 1px solid rgba(166, 195, 255, 0.28);
  box-shadow: 0 0 44px rgba(124, 168, 255, 0.2), inset 0 0 24px rgba(124, 168, 255, 0.16);
  animation: combatOverlayPulse 1300ms ease-in-out infinite;
}

.combatOverlay.tone-safe .combatOverlayPulse {
  border-color: rgba(112, 255, 160, 0.44);
  box-shadow: 0 0 42px rgba(112, 255, 160, 0.26), inset 0 0 24px rgba(112, 255, 160, 0.18);
}

.combatOverlay.tone-balanced .combatOverlayPulse {
  border-color: rgba(61, 248, 194, 0.44);
  box-shadow: 0 0 42px rgba(61, 248, 194, 0.26), inset 0 0 24px rgba(61, 248, 194, 0.18);
}

.combatOverlay.tone-aggressive .combatOverlayPulse {
  border-color: rgba(255, 86, 121, 0.5);
  box-shadow: 0 0 48px rgba(255, 86, 121, 0.28), inset 0 0 24px rgba(255, 86, 121, 0.2);
}

.combatOverlay.tone-reveal .combatOverlayPulse {
  border-color: rgba(255, 184, 92, 0.5);
  box-shadow: 0 0 48px rgba(255, 184, 92, 0.28), inset 0 0 24px rgba(255, 184, 92, 0.2);
}

.combatOverlayScan {
  position: absolute;
  inset: -120% -25% auto -25%;
  height: 48%;
  background: linear-gradient(180deg, rgba(166, 195, 255, 0), rgba(166, 195, 255, 0.22), rgba(166, 195, 255, 0));
  transform: translateY(-100%);
  opacity: 0.16;
  mix-blend-mode: screen;
}

.combatOverlay.live .combatOverlayScan {
  animation: combatOverlayScan 2200ms linear infinite;
}

.combatOverlayEdge {
  position: absolute;
  inset: 0;
  border: 1px solid rgba(162, 186, 255, 0.18);
  box-shadow: inset 0 0 42px rgba(124, 168, 255, 0.1);
}

.combatOverlayLabel {
  position: absolute;
  left: 50%;
  top: 8%;
  transform: translateX(-50%);
  padding: 6px 14px;
  border-radius: 999px;
  border: 1px solid rgba(162, 186, 255, 0.34);
  background: rgba(7, 12, 30, 0.74);
  font-family: "IBM Plex Mono", monospace;
  font-size: 11px;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: #dce5ff;
  text-shadow: 0 0 10px rgba(15, 23, 53, 0.74);
}

.combatOverlayPips {
  position: absolute;
  left: 50%;
  bottom: 7%;
  transform: translateX(-50%);
  display: flex;
  gap: 8px;
}

.overlayPip {
  width: 30px;
  height: 30px;
  border-radius: 999px;
  border: 1px solid rgba(162, 186, 255, 0.3);
  background: rgba(7, 12, 30, 0.78);
  color: #dbe5ff;
  display: grid;
  place-items: center;
  font-family: "IBM Plex Mono", monospace;
  font-size: 10px;
  letter-spacing: 0.08em;
  transition: transform 130ms ease, border-color 130ms ease, box-shadow 130ms ease, color 130ms ease;
}

.overlayPip.active {
  transform: translateY(-2px) scale(1.08);
}

.overlayPip.strike.active {
  border-color: rgba(255, 86, 121, 0.68);
  color: #ffd4de;
  box-shadow: 0 0 18px rgba(255, 86, 121, 0.36);
}

.overlayPip.guard.active {
  border-color: rgba(112, 255, 160, 0.66);
  color: #cbffde;
  box-shadow: 0 0 18px rgba(112, 255, 160, 0.34);
}

.overlayPip.charge.active {
  border-color: rgba(61, 248, 194, 0.66);
  color: #c5fff1;
  box-shadow: 0 0 18px rgba(61, 248, 194, 0.34);
}

@keyframes combatOverlayPulse {
  0% {
    transform: translate(-50%, -50%) scale(0.84);
    opacity: 0.54;
  }
  50% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0.74;
  }
  100% {
    transform: translate(-50%, -50%) scale(0.84);
    opacity: 0.54;
  }
}

@keyframes combatOverlayScan {
  0% {
    transform: translateY(-120%);
  }
  100% {
    transform: translateY(220%);
  }
}

@keyframes pvpPanelScan {
  0% {
    transform: translateX(-38%);
  }
  100% {
    transform: translateX(38%);
  }
}

body.reduced-motion .combatOverlayScan,
body.reduced-motion .combatOverlayPulse {
  animation: none !important;
}

body.reduced-motion .pvpPanel::after {
  animation: none !important;
  opacity: 0 !important;
}

.directorGrid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
}

.contractGrid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
}

.directorBox {
  border: 1px solid rgba(162, 186, 255, 0.2);
  border-radius: 12px;
  padding: 10px;
  background: rgba(7, 12, 30, 0.48);
}

.directorBox .value {
  font-size: 14px;
}

.directorActions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.directorActions .btn {
  flex: 1;
}

.heroMain {
  display: grid;
  align-content: center;
  gap: 8px;
}

.heroStats {
  display: grid;
  gap: 10px;
}

.statBlock {
  border: 1px solid rgba(162, 186, 255, 0.18);
  border-radius: 12px;
  padding: 10px;
  background: rgba(7, 12, 30, 0.48);
}

.label {
  margin: 0;
  color: var(--muted);
  font-size: 11px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  font-family: "IBM Plex Mono", monospace;
}

.value {
  margin: 6px 0 2px;
  font-size: 18px;
  font-weight: 700;
}

.chipRow {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.chip {
  border: 1px solid rgba(162, 186, 255, 0.34);
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 12px;
  color: var(--muted);
  background: rgba(9, 18, 42, 0.65);
}

.chip b {
  color: var(--ink);
}

.layout {
  display: grid;
  grid-template-columns: 1.2fr 1fr;
  gap: 12px;
}

.panel {
  padding: 12px;
}

.panelHead {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  margin-bottom: 10px;
}

.tasks {
  grid-row: span 2;
}

.adminPanel {
  border-color: rgba(255, 184, 92, 0.35);
  box-shadow: inset 0 0 26px rgba(255, 184, 92, 0.1), 0 14px 30px rgba(0, 0, 0, 0.28);
}

.pvpPanel {
  border-color: rgba(197, 126, 255, 0.34);
  box-shadow: inset 0 0 26px rgba(197, 126, 255, 0.14), 0 14px 30px rgba(0, 0, 0, 0.28);
  position: relative;
  overflow: hidden;
}

.pvpPanel::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0;
  background: linear-gradient(120deg, rgba(197, 126, 255, 0), rgba(197, 126, 255, 0.12), rgba(197, 126, 255, 0));
  transition: opacity 220ms ease;
}

.pvpPanel.engaged {
  border-color: rgba(61, 248, 194, 0.44);
  box-shadow: inset 0 0 30px rgba(61, 248, 194, 0.16), 0 16px 30px rgba(0, 0, 0, 0.32);
}

.pvpPanel.engaged::after {
  opacity: 1;
  animation: pvpPanelScan 1800ms linear infinite;
}

.pvpPanel.resolved-win {
  border-color: rgba(112, 255, 160, 0.44);
  box-shadow: inset 0 0 30px rgba(112, 255, 160, 0.16), 0 16px 30px rgba(0, 0, 0, 0.32);
}

.pvpPanel.resolved-loss {
  border-color: rgba(255, 86, 121, 0.5);
  box-shadow: inset 0 0 34px rgba(255, 86, 121, 0.2), 0 16px 30px rgba(0, 0, 0, 0.32);
}

.pvpPanel.resolved-loss::after {
  opacity: 0.9;
  animation: pvpPanelScan 1100ms linear infinite;
}

.pvpPanel .attemptCard .value {
  font-size: 16px;
}

.pvpTickLine {
  margin-top: 4px;
  color: rgba(178, 201, 255, 0.92);
}

.pvpTickLine.live {
  color: #9effd6;
  text-shadow: 0 0 10px rgba(61, 248, 194, 0.34);
}

.pvpMomentumStrip {
  margin-top: 10px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}

.pvpMomentumCell {
  border: 1px solid rgba(162, 186, 255, 0.22);
  border-radius: 12px;
  padding: 9px 10px;
  background: linear-gradient(160deg, rgba(8, 15, 36, 0.82), rgba(4, 9, 24, 0.72));
  display: grid;
  gap: 5px;
}

.pvpMomentumCell .value {
  font-size: 13px;
  font-weight: 700;
}

.pvpObjectiveGrid {
  margin-top: 10px;
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
}

.pvpObjectiveCard {
  border: 1px solid rgba(162, 186, 255, 0.2);
  border-radius: 12px;
  padding: 9px;
  background: rgba(8, 14, 34, 0.74);
  display: grid;
  gap: 4px;
  transition: border-color 160ms ease, box-shadow 160ms ease, transform 160ms ease;
}

.pvpObjectiveCard .value {
  font-size: 13px;
}

.pvpObjectiveCard.neutral {
  border-color: rgba(162, 186, 255, 0.24);
}

.pvpObjectiveCard.advantage {
  border-color: rgba(112, 255, 160, 0.46);
  box-shadow: 0 0 12px rgba(112, 255, 160, 0.16);
}

.pvpObjectiveCard.warning {
  border-color: rgba(255, 184, 92, 0.45);
  box-shadow: 0 0 12px rgba(255, 184, 92, 0.16);
}

.pvpObjectiveCard.danger {
  border-color: rgba(255, 86, 121, 0.46);
  box-shadow: 0 0 14px rgba(255, 86, 121, 0.18);
}

.pvpObjectiveCard.pulse {
  transform: translateY(-1px);
}

.feed {
  grid-column: span 2;
}

.offerList,
.missionList {
  display: grid;
  gap: 8px;
}

.offer,
.mission {
  border: 1px solid rgba(162, 186, 255, 0.18);
  border-radius: 12px;
  padding: 10px;
  background: rgba(8, 15, 36, 0.6);
  display: grid;
  gap: 6px;
}

.offerTop {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}

.offer h4,
.mission h4 {
  font-size: 14px;
}

.offer small,
.mission small {
  color: var(--muted);
  font-weight: 400;
  font-family: "IBM Plex Mono", monospace;
}

.offerActions {
  display: flex;
  gap: 8px;
}

.missionActions {
  display: flex;
  justify-content: flex-end;
}

.tokenActions {
  display: grid;
  gap: 8px;
  margin-top: 10px;
}

.tokenRow {
  display: grid;
  gap: 6px;
}

.tokenRow input,
.tokenRow select {
  width: 100%;
  border-radius: 10px;
  border: 1px solid rgba(162, 186, 255, 0.26);
  background: rgba(4, 9, 24, 0.86);
  color: var(--ink);
  padding: 9px 10px;
  font-size: 13px;
  font-family: "IBM Plex Mono", monospace;
}

.tokenRow input:focus,
.tokenRow select:focus {
  outline: none;
  border-color: rgba(61, 248, 194, 0.8);
  box-shadow: 0 0 0 2px rgba(61, 248, 194, 0.16);
}

.attemptStack {
  display: grid;
  gap: 8px;
}

.attemptCard {
  border: 1px solid rgba(162, 186, 255, 0.18);
  border-radius: 12px;
  padding: 10px;
  background: rgba(8, 15, 36, 0.6);
}

.simBox {
  margin-top: 10px;
  border: 1px solid rgba(162, 186, 255, 0.2);
  border-radius: 12px;
  padding: 10px;
  background: rgba(6, 12, 30, 0.7);
  display: grid;
  gap: 8px;
}

.simHead {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
}

.simPrompt {
  margin: 0;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid rgba(162, 186, 255, 0.2);
  background: rgba(3, 8, 22, 0.8);
  font-size: 13px;
  font-weight: 700;
  letter-spacing: 0.02em;
}

.simPrompt.hot {
  border-color: rgba(255, 86, 121, 0.55);
  box-shadow: 0 0 10px rgba(255, 86, 121, 0.25);
}

.simPrompt.ok {
  border-color: rgba(112, 255, 160, 0.55);
  box-shadow: 0 0 10px rgba(112, 255, 160, 0.22);
}

.simActions {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}

.modeGrid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
  margin-top: 10px;
}

.raidGrid {
  margin-top: 8px;
}

.mode {
  border-radius: 10px;
  border: 1px solid var(--line);
  background: rgba(6, 12, 26, 0.9);
  color: var(--ink);
  padding: 10px 8px;
  cursor: pointer;
  font-weight: 700;
  font-size: 12px;
  transition: transform 140ms ease, border-color 140ms ease;
}

.mode:hover {
  transform: translateY(-1px);
}

.mode:disabled,
.btn:disabled,
.cmd:disabled {
  opacity: 0.45;
  cursor: not-allowed;
  transform: none;
}

.mode.safe {
  border-color: rgba(112, 255, 160, 0.44);
}

.mode.balanced {
  border-color: rgba(61, 248, 194, 0.44);
}

.mode.aggressive {
  border-color: rgba(255, 86, 121, 0.44);
}

.mode.reveal {
  border-color: rgba(255, 184, 92, 0.44);
}

.commands .commandGrid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}

.eventFeed {
  list-style: none;
  padding: 0;
  margin: 0;
  display: grid;
  gap: 6px;
  max-height: 220px;
  overflow: auto;
}

.eventFeed li {
  border: 1px solid rgba(162, 186, 255, 0.15);
  border-radius: 10px;
  padding: 8px;
  background: rgba(7, 12, 30, 0.6);
  font-size: 12px;
}

.eventFeed .time {
  color: var(--muted);
  margin-left: 8px;
  font-family: "IBM Plex Mono", monospace;
}

.adminAssetList {
  list-style: none;
  margin: 2px 0 0;
  padding: 0;
  display: grid;
  gap: 6px;
  max-height: 180px;
  overflow: auto;
}

.adminAssetRow {
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 8px;
  border: 1px solid rgba(162, 186, 255, 0.18);
  border-radius: 10px;
  padding: 7px 8px;
  background: rgba(8, 14, 34, 0.68);
}

.adminAssetRow.missing {
  border-color: rgba(255, 86, 121, 0.42);
}

.adminAssetMeta {
  margin: 0;
  color: var(--muted);
  font-size: 11px;
  font-family: "IBM Plex Mono", monospace;
}

.adminAssetState {
  border-radius: 999px;
  padding: 3px 8px;
  font-size: 10px;
  font-family: "IBM Plex Mono", monospace;
  border: 1px solid rgba(162, 186, 255, 0.24);
  color: #dbe5ff;
  background: rgba(8, 15, 36, 0.88);
}

.adminAssetState.ready {
  border-color: rgba(112, 255, 160, 0.45);
  color: #b6ffd0;
}

.adminAssetState.missing {
  border-color: rgba(255, 86, 121, 0.5);
  color: #ffc0cf;
}

.pvpBoard {
  list-style: none;
  padding: 0;
  margin: 10px 0 0;
  display: grid;
  gap: 6px;
  max-height: 200px;
  overflow: auto;
}

.pvpBoardRow {
  border: 1px solid rgba(162, 186, 255, 0.15);
  border-radius: 10px;
  padding: 8px;
  background: rgba(7, 12, 30, 0.62);
  font-size: 12px;
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
}

.pvpTimelineBlock {
  margin-top: 10px;
  border: 1px solid rgba(162, 186, 255, 0.2);
  border-radius: 12px;
  padding: 10px;
  background: rgba(8, 14, 34, 0.78);
  display: grid;
  gap: 8px;
}

.pvpTimelineBlock h4 {
  margin: 0;
  font-size: 13px;
  letter-spacing: 0.04em;
  text-transform: uppercase;
}

.pvpTimelineList {
  list-style: none;
  padding: 0;
  margin: 0;
  display: grid;
  gap: 6px;
  max-height: 156px;
  overflow: auto;
}

.pvpTimelineRow {
  border: 1px solid rgba(162, 186, 255, 0.2);
  border-radius: 10px;
  padding: 7px 8px;
  background: rgba(6, 12, 29, 0.86);
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
  font-size: 12px;
}

.pvpTimelineRow .meta {
  font-family: "IBM Plex Mono", monospace;
  color: var(--muted);
  font-size: 11px;
}

.pvpTimelineRow.tick {
  border-color: rgba(162, 186, 255, 0.35);
}

.pvpTimelineRow.action {
  border-color: rgba(61, 248, 194, 0.38);
}

.pvpTimelineRow.resolve {
  border-color: rgba(255, 184, 92, 0.42);
}

.pvpTimelineRow.reject {
  border-color: rgba(255, 86, 121, 0.42);
}

.replayStripWrap {
  display: grid;
  gap: 6px;
}

.replayStripWrap .micro {
  margin: 0;
}

.pvpReplayStrip {
  display: flex;
  gap: 6px;
  overflow-x: auto;
  padding-bottom: 2px;
}

.replayChip {
  flex: 0 0 auto;
  border: 1px solid rgba(162, 186, 255, 0.28);
  border-radius: 999px;
  background: rgba(8, 15, 36, 0.85);
  color: var(--ink);
  font-size: 11px;
  padding: 5px 9px;
  font-family: "IBM Plex Mono", monospace;
}

.replayChip.strike {
  border-color: rgba(255, 86, 121, 0.55);
}

.replayChip.guard {
  border-color: rgba(112, 255, 160, 0.52);
}

.replayChip.charge {
  border-color: rgba(61, 248, 194, 0.52);
}

.replayChip.resolve {
  border-color: rgba(255, 184, 92, 0.55);
}

.badge {
  border: 1px solid rgba(61, 248, 194, 0.4);
  background: rgba(61, 248, 194, 0.16);
  color: #bfffe9;
  font-size: 11px;
  border-radius: 999px;
  padding: 4px 10px;
  font-family: "IBM Plex Mono", monospace;
}

.badge.warn {
  border-color: rgba(255, 184, 92, 0.42);
  background: rgba(255, 184, 92, 0.16);
  color: #ffe0b4;
}

.badge.info {
  border-color: rgba(162, 186, 255, 0.42);
  background: rgba(162, 186, 255, 0.15);
  color: #dce5ff;
}

.meter {
  position: relative;
  width: 100%;
  height: 9px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.08);
  overflow: hidden;
}

.meter > span {
  width: 0;
  height: 100%;
  display: block;
  background: linear-gradient(90deg, var(--accent), var(--gold));
  box-shadow: 0 0 14px rgba(61, 248, 194, 0.42);
  transition: width 180ms ease-out, filter 180ms ease-out, box-shadow 180ms ease-out;
  filter: saturate(calc(0.92 + var(--hud-heat) * 0.75));
}

body[data-scene-mood="safe"] .meter > span {
  background: linear-gradient(90deg, #70ffa0, #3df8c2);
}

body[data-scene-mood="aggressive"] .meter > span {
  background: linear-gradient(90deg, #ff5679, #ffb85c);
  box-shadow: 0 0 16px rgba(255, 86, 121, 0.46);
}

body[data-scene-mood="critical"] .meter > span {
  background: linear-gradient(90deg, #ff416d, #ffc266);
  box-shadow: 0 0 18px rgba(255, 65, 109, 0.5);
}

.btn,
.cmd {
  border: 1px solid var(--line);
  border-radius: 10px;
  background: rgba(8, 15, 36, 0.86);
  color: var(--ink);
  padding: 9px 10px;
  cursor: pointer;
  font-weight: 700;
  letter-spacing: 0.03em;
  transition: transform 120ms ease, border-color 120ms ease;
}

.btn:hover,
.cmd:hover {
  transform: translateY(-1px);
  border-color: rgba(61, 248, 194, 0.65);
}

.btn[data-active="1"] {
  border-color: rgba(61, 248, 194, 0.58);
  background: rgba(61, 248, 194, 0.16);
}

.btn.accent {
  border-color: rgba(61, 248, 194, 0.44);
  background: rgba(61, 248, 194, 0.2);
}

.btn.ghost {
  background: transparent;
}

.cmd {
  font-size: 12px;
  text-transform: uppercase;
}

.muted {
  margin: 0;
  color: var(--muted);
  font-size: 12px;
}

.toast {
  position: fixed;
  left: 50%;
  bottom: 22px;
  transform: translateX(-50%) translateY(24px);
  opacity: 0;
  padding: 10px 14px;
  border-radius: 10px;
  border: 1px solid rgba(162, 186, 255, 0.4);
  background: rgba(7, 12, 30, 0.92);
  color: var(--ink);
  font-size: 13px;
  z-index: 12;
  pointer-events: none;
  transition: opacity 180ms ease, transform 180ms ease;
}

.toast.show {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

.introModal {
  position: fixed;
  inset: 0;
  z-index: 20;
  background: rgba(4, 9, 24, 0.84);
  backdrop-filter: blur(8px);
  display: grid;
  place-items: center;
  padding: 18px;
}

.introCard {
  width: min(640px, 100%);
  border: 1px solid rgba(162, 186, 255, 0.28);
  border-radius: 18px;
  padding: 18px;
  display: grid;
  gap: 12px;
  background: linear-gradient(140deg, rgba(20, 35, 80, 0.88), rgba(9, 15, 36, 0.9));
  box-shadow: 0 18px 50px rgba(0, 0, 0, 0.45), inset 0 0 24px rgba(114, 146, 255, 0.2);
}

.introList {
  margin: 0;
  padding-left: 18px;
  display: grid;
  gap: 6px;
  color: var(--ink);
}

@media (max-width: 1080px) {
  .hero {
    grid-template-columns: 1fr;
  }

  .directorGrid {
    grid-template-columns: 1fr;
  }

  .contractGrid {
    grid-template-columns: 1fr;
  }

  .telemetryGrid {
    grid-template-columns: 1fr;
  }

  .combatStrip {
    grid-template-columns: 1fr;
  }

  .combatDirectorStrip {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .pvpObjectiveGrid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .layout {
    grid-template-columns: 1fr;
  }

  .tasks,
  .feed {
    grid-row: auto;
    grid-column: auto;
  }
}

@media (max-width: 680px) {
  .shell {
    padding: 12px;
    gap: 10px;
  }

  h1 {
    font-size: 42px;
  }

  .headerActions {
    width: 100%;
    justify-content: stretch;
  }

  .headerActions .btn {
    flex: 1;
  }

  .modeGrid,
  .commands .commandGrid,
  .simActions {
    grid-template-columns: 1fr;
  }

  .directorActions {
    display: grid;
    grid-template-columns: 1fr;
  }

  .telemetryCanvas {
    min-height: 102px;
    height: 112px;
  }

  .combatCell .value {
    font-size: 12px;
  }

  .combatDirectorStrip {
    grid-template-columns: 1fr;
  }

  .pvpMomentumStrip,
  .pvpObjectiveGrid {
    grid-template-columns: 1fr;
  }

  .combatDirectorCell .value {
    font-size: 12px;
  }
}
